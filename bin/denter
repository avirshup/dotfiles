#!/bin/bash
info=$(docker inspect $1)
exists=$?
if [ "$2" == '--socket' ] ; then
   flags='-v /var/run/docker.sock:/var/run/docker.sock'
else
   flags=''
fi
echo $info | grep -s "RepoTags" > /dev/null
if [ $? -eq 0 ]; then  # it's an image
   dbash $1 $2
elif [ $exists -eq 0 ] ; then  # it's a container
echo $info | grep -s '"Running": true,' > /dev/null
if [ $? -eq 0 ]; then # it's running now
    echocmd docker exec -it $1 sh
else # it's stopped
    echocmd docker commit $1 denter_temptemp
    echocmd docker run $flags --entrypoint=sh -it denter_temptemp
fi
  else
     echo "No image or container named '$1'"
  fi
